webpackJsonp([0],{202:function(e,t,n){"use strict";function i(e){return"sensors."+e+".data"}const s="sensorReadings";e.exports=function(e){function t(e){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n="",i=0;i<e;i++){var s=Math.floor(Math.random()*t.length);n+=t.substring(s,s+1)}return n}function r(){var e=[];for(var t in m.value.sensors){var n=m.value.sensors[t];n.id===t&&"string"==typeof n.name&&"string"==typeof n.twilio_sim_sid?(t in g?n.name===g[t].info.name&&n.twilio_sim_sid===g[t].info.twilio_sim_sid||(console.log("Updating sensor",n),g[t].info=n):(console.log("Loading new sensor",n),g[t]={info:n}),a(n)):(console.warn("Invalid sensor configuration, removing from the list: ",t,n),e.push(t))}for(var t in g)t in m.value.sensors||(console.log("Deleting sensor listenor",g[t]),g[t].readingsMap&&g[t].readingsMap.removeAllListeners("itemUpdated"),delete g[t]);return e}function a(t){p.map(s).then(function(n){n.get(i(t.id)).then(function(n){var i=g[t.id];i.readingsMap=n,i.readings=n.value,o(i,n),e.updateCharts(i.series)}),n.on("itemUpdated",function(n){var i=g[t.id];i.readings=n.value,o(i,n),e.updateCharts(i.series)})})}function o(e,t){e.series||(e.series={temperature:[],humidity:[],weight:[]});var n=new Date,i=t.value.weight<0?0:t.value.weight;e.series.temperature.push({x:n,y:t.value.temperature}),e.series.humidity.push({x:n,y:t.value.humidity}),e.series.weight.push({x:n,y:i})}function l(e,t){return e.id&&e.id.match(/^[a-zA-Z0-9]+$/)?e.name?!(!e.twilio_sim_sid||!e.twilio_sim_sid.match(/^DE[a-z0-9]{32}$/))||(t("sensor sim SID is invalid: "+e.twilio_sim_sid),!1):(t("sensor name is not specified"),!1):(t("sensor id is invalid: "+e.id),!1)}function c(){var e=t(16);return{token:e,hash:d.createHash("sha512").update(e).digest("hex")}}const u=n(4),d=n(43),h=n(319).Client;n(0);var p,f,m,g={};return{initialized:u.Deferred(),sensors:g,updateToken:function(e){var t=this;return u.get("/userauthenticate?username=twilio&pincode=928462",function(n){n.success?(console.log("token updated:",n),f=n.token,p?p.updateToken(f):p=new h(f),e&&e(f),setTimeout(t.updateToken.bind(t),1e3*n.ttl*.96)):console.error("failed to authenticate the user: ",n.error)}).fail(function(e,n,i){console.error("failed to send authentication request:",n,i),setTimeout(t.updateToken.bind(t),1e4)})},fetchConfiguration:function(){return p.document("app.configuration").then(function(e){m=e;var t,n=null;return e.value.sensors?(t=r(),t.length&&(null===n&&(n=u.extend(!0,e.value,{})),t.forEach(function(e){delete n.sensors[e]}))):(console.warn("sensors is not configured, creating an empty list"),null===n&&(n=u.extend(!0,e.value,{})),n.sensors={}),n}).then(function(e){if(null!==e)return Promise.all([p.map(s).then(function(e){e.set("sensors",{}).then(function(e){console.log("dataReadings map created")})}),m.set(e).then(function(){console.log("app configuration updated with new value:",e)})])})},addSensor:function(t,n){if(l(t,n)){if(t.id in m.value.sensors)return n("Sensor with the same ID exists");t.created_at=(new Date).getTime();var a=c();t.hash=a.hash,m.mutate(function(e){return e.sensors||(e.sensors={}),e.sensors[t.id]=t,e}).then(function(){return Promise.all([p.map(s).then(function(e){return console.log(e),Promise.all[e.set(i(t.id),{humidity:-1,temperature:-1,weight:-1})]})])}).then(function(){r(),n(null,u.extend(!0,g[t.id].info,{token:a.token})),e.refresh()}).catch(function(e){n(e)})}},updateSensor:function(t,n){m.mutate(function(e){return t.id in e.sensors?e.sensors[t.id]=u.extend(!0,t,{hash:e.sensors[t.id].hash}):n("Sensor is not in the list"),e}).then(function(){r(),n(null),e.refresh()}).catch(function(e){n(e)})},regenToken:function(t,n){var i=c();m.mutate(function(e){if(!(t in e.sensors))throw"unknown sensor: "+t;return e.sensors[t].hash=i.hash,e}).then(function(){r(),n(u.extend(!0,g[t].info,{token:i.token})),e.refresh()}).catch(function(e){console.error("regenToken",e)})},deleteSensor:function(t){m.mutate(function(e){return delete e.sensors[t],e}).then(function(){r(),e.refresh()}).then(function(){p.map(s).then(function(e){e.remove(i(t)).then(function(){console.log("Deleted sensor ",i(t))})})})},init:function(){var t=this;this.updateToken(function(n){t.fetchConfiguration().then(function(){e.refresh()}).then(function(){t.initialized.resolve()})})}}}},203:function(e,t,n){const i=n(242),s=n(0);var r={templateUrl:n(293),init:function(app,e){e.sensors=app.sensors,e.noSensor=function(){return 0===Object.keys(app.sensors).length},e.updateCharts=function(){e.temperatureChart.update({series:[app.series.temperature]}),e.humidityChart.update({series:[app.series.humidity]}),e.weightChart.update({series:[app.series.weight]})},e.initCharts=function(){var t={series:[{name:"ticks",data:[]}]},n={width:300,height:200,axisX:{type:i.FixedScaleAxis,divisor:5,labelInterpolationFnc:function(e){return s(e).format("HH:mm")}}};e.temperatureChart=new i.Line("#chart-temperature",t,n),e.humidityChart=new i.Line("#chart-humidity",t,n),e.weightChart=new i.Line("#chart-weight",t,n),void 0!==app.series&&e.updateCharts(app.series)}}};e.exports=r},204:function(e,t,n){var i=n(4),s={templateUrl:n(294),init:function(app,e){e.sensors=app.sensors,e.newSensor={},e.noSensor=function(){return 0===Object.keys(app.sensors).length},e.addSensor=function(){app.addSensor(angular.copy(e.newSensor),function(t,n){t?i("#add-sensor-failed").text(JSON.stringify(t)):(e.editedSensorInfo=n,i(".add-sensor").hide(),i(".add-sensor-show").fadeIn(333),e.$apply())})},e.editSensor=function(t){e.editedSensorInfo=app.sensors[t].info,i(".edit-sensor").fadeIn(333)},e.updateSensor=function(){app.updateSensor(angular.copy(e.editedSensorInfo),function(t){t?i("#edit-sensor-failed").text(JSON.stringify(t)):(i(".edit-sensor").hide(),e.$apply())})},e.deleteSensor=function(e){app.deleteSensor(e)},e.regenTokenForSensor=function(t){app.regenToken(t,function(t){e.editedSensorInfo=t})},i(".add-sensor-show").click(function(){i(this).hide(),i(".add-sensor").fadeIn(333)}),i(".add-sensor-cancel").click(function(){i(".add-sensor").hide(),i(".add-sensor-show").fadeIn(333)}),i(".edit-sensor-cancel").click(function(){e.editedSensorInfo=null,i(".edit-sensor").hide(),e.$apply()})}};e.exports=s},206:function(e,t,n){e.exports=n.p+"index.html"},207:function(e,t){e.exports=angular},208:function(e,t){e.exports=void 0},209:function(e,t,n){"use strict";const i=n(4),s=n(207),r=n(0);n(208);n(30),n(31),n(206);const a=n(203),o=n(204);var l,c,App=n(202);window.app=new App({updateCharts:function(e){window.app.series=e,c.updateCharts(),c.$apply()},refresh:function(){c.$apply()}}),s.module("app",["ngRoute"]).controller("DashboardViewCtrl",["$scope",function(e){c=e,l=a,i.when(app.initialized).done(function(){e.$evalAsync(function(){a.init(app,e)})})}]).controller("SensorListViewCtrl",["$scope",function(e){c=e,l=o,i.when(app.initialized).done(function(){e.$evalAsync(function(){o.init(app,e)})})}]).config(["$routeProvider",function(e){e.when("/dashboard",{controller:"DashboardViewCtrl",templateUrl:a.templateUrl}).when("/sensors",{controller:"SensorListViewCtrl",templateUrl:o.templateUrl}).otherwise({redirectTo:"/dashboard"})}]).filter("moment",function(){return function(e){return r(e).format("MMM DD YYYY @ hh:mm")}})},242:function(e,t,n){var i,s;!function(n,r){i=[],void 0!==(s=function(){return n.Chartist=r()}.apply(t,i))&&(e.exports=s)}(this,function(){var e={version:"0.11.0"};return function(e,t,n){"use strict";n.namespaces={svg:"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/xmlns/",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",ct:"http://gionkunz.github.com/chartist-js/ct"},n.noop=function(e){return e},n.alphaNumerate=function(e){return String.fromCharCode(97+e%26)},n.extend=function(e){var t,i,s;for(e=e||{},t=1;t<arguments.length;t++){i=arguments[t];for(var r in i)s=i[r],"object"!=typeof s||null===s||s instanceof Array?e[r]=s:e[r]=n.extend(e[r],s)}return e},n.replaceAll=function(e,t,n){return e.replace(new RegExp(t,"g"),n)},n.ensureUnit=function(e,t){return"number"==typeof e&&(e+=t),e},n.quantity=function(e){if("string"==typeof e){var t=/^(\d+)\s*(.*)$/g.exec(e);return{value:+t[1],unit:t[2]||void 0}}return{value:e}},n.querySelector=function(e){return e instanceof Node?e:t.querySelector(e)},n.times=function(e){return Array.apply(null,new Array(e))},n.sum=function(e,t){return e+(t||0)},n.mapMultiply=function(e){return function(t){return t*e}},n.mapAdd=function(e){return function(t){return t+e}},n.serialMap=function(e,t){var i=[],s=Math.max.apply(null,e.map(function(e){return e.length}));return n.times(s).forEach(function(n,s){var r=e.map(function(e){return e[s]});i[s]=t.apply(null,r)}),i},n.roundWithPrecision=function(e,t){var i=Math.pow(10,t||n.precision);return Math.round(e*i)/i},n.precision=8,n.escapingMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"},n.serialize=function(e){return null===e||void 0===e?e:("number"==typeof e?e=""+e:"object"==typeof e&&(e=JSON.stringify({data:e})),Object.keys(n.escapingMap).reduce(function(e,t){return n.replaceAll(e,t,n.escapingMap[t])},e))},n.deserialize=function(e){if("string"!=typeof e)return e;e=Object.keys(n.escapingMap).reduce(function(e,t){return n.replaceAll(e,n.escapingMap[t],t)},e);try{e=JSON.parse(e),e=void 0!==e.data?e.data:e}catch(e){}return e},n.createSvg=function(e,t,i,s){var r;return t=t||"100%",i=i||"100%",Array.prototype.slice.call(e.querySelectorAll("svg")).filter(function(e){return e.getAttributeNS(n.namespaces.xmlns,"ct")}).forEach(function(t){e.removeChild(t)}),r=new n.Svg("svg").attr({width:t,height:i}).addClass(s),r._node.style.width=t,r._node.style.height=i,e.appendChild(r._node),r},n.normalizeData=function(e,t,i){var s,r={raw:e,normalized:{}};return r.normalized.series=n.getDataArray({series:e.series||[]},t,i),s=r.normalized.series.every(function(e){return e instanceof Array})?Math.max.apply(null,r.normalized.series.map(function(e){return e.length})):r.normalized.series.length,r.normalized.labels=(e.labels||[]).slice(),Array.prototype.push.apply(r.normalized.labels,n.times(Math.max(0,s-r.normalized.labels.length)).map(function(){return""})),t&&n.reverseData(r.normalized),r},n.safeHasProperty=function(e,t){return null!==e&&"object"==typeof e&&e.hasOwnProperty(t)},n.isDataHoleValue=function(e){return null===e||void 0===e||"number"==typeof e&&isNaN(e)},n.reverseData=function(e){e.labels.reverse(),e.series.reverse();for(var t=0;t<e.series.length;t++)"object"==typeof e.series[t]&&void 0!==e.series[t].data?e.series[t].data.reverse():e.series[t]instanceof Array&&e.series[t].reverse()},n.getDataArray=function(e,t,i){function s(e){if(n.safeHasProperty(e,"value"))return s(e.value);if(n.safeHasProperty(e,"data"))return s(e.data);if(e instanceof Array)return e.map(s);if(!n.isDataHoleValue(e)){if(i){var t={};return"string"==typeof i?t[i]=n.getNumberOrUndefined(e):t.y=n.getNumberOrUndefined(e),t.x=e.hasOwnProperty("x")?n.getNumberOrUndefined(e.x):t.x,t.y=e.hasOwnProperty("y")?n.getNumberOrUndefined(e.y):t.y,t}return n.getNumberOrUndefined(e)}}return e.series.map(s)},n.normalizePadding=function(e,t){return t=t||0,"number"==typeof e?{top:e,right:e,bottom:e,left:e}:{top:"number"==typeof e.top?e.top:t,right:"number"==typeof e.right?e.right:t,bottom:"number"==typeof e.bottom?e.bottom:t,left:"number"==typeof e.left?e.left:t}},n.getMetaData=function(e,t){var n=e.data?e.data[t]:e[t];return n?n.meta:void 0},n.orderOfMagnitude=function(e){return Math.floor(Math.log(Math.abs(e))/Math.LN10)},n.projectLength=function(e,t,n){return t/n.range*e},n.getAvailableHeight=function(e,t){return Math.max((n.quantity(t.height).value||e.height())-(t.chartPadding.top+t.chartPadding.bottom)-t.axisX.offset,0)},n.getHighLow=function(e,t,i){function s(e){if(void 0!==e)if(e instanceof Array)for(var t=0;t<e.length;t++)s(e[t]);else{var n=i?+e[i]:+e;a&&n>r.high&&(r.high=n),o&&n<r.low&&(r.low=n)}}t=n.extend({},t,i?t["axis"+i.toUpperCase()]:{});var r={high:void 0===t.high?-Number.MAX_VALUE:+t.high,low:void 0===t.low?Number.MAX_VALUE:+t.low},a=void 0===t.high,o=void 0===t.low;return(a||o)&&s(e),(t.referenceValue||0===t.referenceValue)&&(r.high=Math.max(t.referenceValue,r.high),r.low=Math.min(t.referenceValue,r.low)),r.high<=r.low&&(0===r.low?r.high=1:r.low<0?r.high=0:r.high>0?r.low=0:(r.high=1,r.low=0)),r},n.isNumeric=function(e){return null!==e&&isFinite(e)},n.isFalseyButZero=function(e){return!e&&0!==e},n.getNumberOrUndefined=function(e){return n.isNumeric(e)?+e:void 0},n.isMultiValue=function(e){return"object"==typeof e&&("x"in e||"y"in e)},n.getMultiValue=function(e,t){return n.isMultiValue(e)?n.getNumberOrUndefined(e[t||"y"]):n.getNumberOrUndefined(e)},n.rho=function(e){function t(e,n){return e%n==0?n:t(n,e%n)}function n(e){return e*e+1}if(1===e)return e;var i,s=2,r=2;if(e%2==0)return 2;do{s=n(s)%e,r=n(n(r))%e,i=t(Math.abs(s-r),e)}while(1===i);return i},n.getBounds=function(e,t,i,s){function r(e,t){return e===(e+=t)&&(e*=1+(t>0?f:-f)),e}var a,o,l,c=0,u={high:t.high,low:t.low};u.valueRange=u.high-u.low,u.oom=n.orderOfMagnitude(u.valueRange),u.step=Math.pow(10,u.oom),u.min=Math.floor(u.low/u.step)*u.step,u.max=Math.ceil(u.high/u.step)*u.step,u.range=u.max-u.min,u.numberOfSteps=Math.round(u.range/u.step);var d=n.projectLength(e,u.step,u),h=d<i,p=s?n.rho(u.range):0;if(s&&n.projectLength(e,1,u)>=i)u.step=1;else if(s&&p<u.step&&n.projectLength(e,p,u)>=i)u.step=p;else for(;;){if(h&&n.projectLength(e,u.step,u)<=i)u.step*=2;else{if(h||!(n.projectLength(e,u.step/2,u)>=i))break;if(u.step/=2,s&&u.step%1!=0){u.step*=2;break}}if(c++>1e3)throw new Error("Exceeded maximum number of iterations while optimizing scale step!")}var f=2.221e-16;for(u.step=Math.max(u.step,f),o=u.min,l=u.max;o+u.step<=u.low;)o=r(o,u.step);for(;l-u.step>=u.high;)l=r(l,-u.step);u.min=o,u.max=l,u.range=u.max-u.min;var m=[];for(a=u.min;a<=u.max;a=r(a,u.step)){var g=n.roundWithPrecision(a);g!==m[m.length-1]&&m.push(g)}return u.values=m,u},n.polarToCartesian=function(e,t,n,i){var s=(i-90)*Math.PI/180;return{x:e+n*Math.cos(s),y:t+n*Math.sin(s)}},n.createChartRect=function(e,t,i){var s=!(!t.axisX&&!t.axisY),r=s?t.axisY.offset:0,a=s?t.axisX.offset:0,o=e.width()||n.quantity(t.width).value||0,l=e.height()||n.quantity(t.height).value||0,c=n.normalizePadding(t.chartPadding,i);o=Math.max(o,r+c.left+c.right),l=Math.max(l,a+c.top+c.bottom);var u={padding:c,width:function(){return this.x2-this.x1},height:function(){return this.y1-this.y2}};return s?("start"===t.axisX.position?(u.y2=c.top+a,u.y1=Math.max(l-c.bottom,u.y2+1)):(u.y2=c.top,u.y1=Math.max(l-c.bottom-a,u.y2+1)),"start"===t.axisY.position?(u.x1=c.left+r,u.x2=Math.max(o-c.right,u.x1+1)):(u.x1=c.left,u.x2=Math.max(o-c.right-r,u.x1+1))):(u.x1=c.left,u.x2=Math.max(o-c.right,u.x1+1),u.y2=c.top,u.y1=Math.max(l-c.bottom,u.y2+1)),u},n.createGrid=function(e,t,i,s,r,a,o,l){var c={};c[i.units.pos+"1"]=e,c[i.units.pos+"2"]=e,c[i.counterUnits.pos+"1"]=s,c[i.counterUnits.pos+"2"]=s+r;var u=a.elem("line",c,o.join(" "));l.emit("draw",n.extend({type:"grid",axis:i,index:t,group:a,element:u},c))},n.createGridBackground=function(e,t,n,i){var s=e.elem("rect",{x:t.x1,y:t.y2,width:t.width(),height:t.height()},n,!0);i.emit("draw",{type:"gridBackground",group:e,element:s})},n.createLabel=function(e,i,s,r,a,o,l,c,u,d,h){var p,f={};if(f[a.units.pos]=e+l[a.units.pos],f[a.counterUnits.pos]=l[a.counterUnits.pos],f[a.units.len]=i,f[a.counterUnits.len]=Math.max(0,o-10),d){var m=t.createElement("span");m.className=u.join(" "),m.setAttribute("xmlns",n.namespaces.xhtml),m.innerText=r[s],m.style[a.units.len]=Math.round(f[a.units.len])+"px",m.style[a.counterUnits.len]=Math.round(f[a.counterUnits.len])+"px",p=c.foreignObject(m,n.extend({style:"overflow: visible;"},f))}else p=c.elem("text",f,u.join(" ")).text(r[s]);h.emit("draw",n.extend({type:"label",axis:a,index:s,group:c,element:p,text:r[s]},f))},n.getSeriesOption=function(e,t,n){if(e.name&&t.series&&t.series[e.name]){var i=t.series[e.name];return i.hasOwnProperty(n)?i[n]:t[n]}return t[n]},n.optionsProvider=function(t,i,s){function r(t){var r=o;if(o=n.extend({},c),i)for(l=0;l<i.length;l++){var a=e.matchMedia(i[l][0]);a.matches&&(o=n.extend(o,i[l][1]))}s&&t&&s.emit("optionsChanged",{previousOptions:r,currentOptions:o})}function a(){u.forEach(function(e){e.removeListener(r)})}var o,l,c=n.extend({},t),u=[];if(!e.matchMedia)throw"window.matchMedia not found! Make sure you're using a polyfill.";if(i)for(l=0;l<i.length;l++){var d=e.matchMedia(i[l][0]);d.addListener(r),u.push(d)}return r(),{removeMediaQueryListeners:a,getCurrentOptions:function(){return n.extend({},o)}}},n.splitIntoSegments=function(e,t,i){var s={increasingX:!1,fillHoles:!1};i=n.extend({},s,i);for(var r=[],a=!0,o=0;o<e.length;o+=2)void 0===n.getMultiValue(t[o/2].value)?i.fillHoles||(a=!0):(i.increasingX&&o>=2&&e[o]<=e[o-2]&&(a=!0),a&&(r.push({pathCoordinates:[],valueData:[]}),a=!1),r[r.length-1].pathCoordinates.push(e[o],e[o+1]),r[r.length-1].valueData.push(t[o/2]));return r}}(window,document,e),function(e,t,n){"use strict";n.Interpolation={},n.Interpolation.none=function(e){var t={fillHoles:!1};return e=n.extend({},t,e),function(t,i){for(var s=new n.Svg.Path,r=!0,a=0;a<t.length;a+=2){var o=t[a],l=t[a+1],c=i[a/2];void 0!==n.getMultiValue(c.value)?(r?s.move(o,l,!1,c):s.line(o,l,!1,c),r=!1):e.fillHoles||(r=!0)}return s}},n.Interpolation.simple=function(e){var t={divisor:2,fillHoles:!1};e=n.extend({},t,e);var i=1/Math.max(1,e.divisor);return function(t,s){for(var r,a,o,l=new n.Svg.Path,c=0;c<t.length;c+=2){var u=t[c],d=t[c+1],h=(u-r)*i,p=s[c/2];void 0!==p.value?(void 0===o?l.move(u,d,!1,p):l.curve(r+h,a,u-h,d,u,d,!1,p),r=u,a=d,o=p):e.fillHoles||(r=u=o=void 0)}return l}},n.Interpolation.cardinal=function(e){var t={tension:1,fillHoles:!1};e=n.extend({},t,e);var i=Math.min(1,Math.max(0,e.tension)),s=1-i;return function t(r,a){var o=n.splitIntoSegments(r,a,{fillHoles:e.fillHoles});if(o.length){if(o.length>1){var l=[];return o.forEach(function(e){l.push(t(e.pathCoordinates,e.valueData))}),n.Svg.Path.join(l)}if(r=o[0].pathCoordinates,a=o[0].valueData,r.length<=4)return n.Interpolation.none()(r,a);for(var c=(new n.Svg.Path).move(r[0],r[1],!1,a[0]),u=0,d=r.length;d-2>u;u+=2){var h=[{x:+r[u-2],y:+r[u-1]},{x:+r[u],y:+r[u+1]},{x:+r[u+2],y:+r[u+3]},{x:+r[u+4],y:+r[u+5]}];d-4===u?h[3]=h[2]:u||(h[0]={x:+r[u],y:+r[u+1]}),c.curve(i*(-h[0].x+6*h[1].x+h[2].x)/6+s*h[2].x,i*(-h[0].y+6*h[1].y+h[2].y)/6+s*h[2].y,i*(h[1].x+6*h[2].x-h[3].x)/6+s*h[2].x,i*(h[1].y+6*h[2].y-h[3].y)/6+s*h[2].y,h[2].x,h[2].y,!1,a[(u+2)/2])}return c}return n.Interpolation.none()([])}},n.Interpolation.monotoneCubic=function(e){var t={fillHoles:!1};return e=n.extend({},t,e),function t(i,s){var r=n.splitIntoSegments(i,s,{fillHoles:e.fillHoles,increasingX:!0});if(r.length){if(r.length>1){var a=[];return r.forEach(function(e){a.push(t(e.pathCoordinates,e.valueData))}),n.Svg.Path.join(a)}if(i=r[0].pathCoordinates,s=r[0].valueData,i.length<=4)return n.Interpolation.none()(i,s);var o,l,c=[],u=[],d=i.length/2,h=[],p=[],f=[],m=[];for(o=0;o<d;o++)c[o]=i[2*o],u[o]=i[2*o+1];for(o=0;o<d-1;o++)f[o]=u[o+1]-u[o],m[o]=c[o+1]-c[o],p[o]=f[o]/m[o];for(h[0]=p[0],h[d-1]=p[d-2],o=1;o<d-1;o++)0===p[o]||0===p[o-1]||p[o-1]>0!=p[o]>0?h[o]=0:(h[o]=3*(m[o-1]+m[o])/((2*m[o]+m[o-1])/p[o-1]+(m[o]+2*m[o-1])/p[o]),isFinite(h[o])||(h[o]=0));for(l=(new n.Svg.Path).move(c[0],u[0],!1,s[0]),o=0;o<d-1;o++)l.curve(c[o]+m[o]/3,u[o]+h[o]*m[o]/3,c[o+1]-m[o]/3,u[o+1]-h[o+1]*m[o]/3,c[o+1],u[o+1],!1,s[o+1]);return l}return n.Interpolation.none()([])}},n.Interpolation.step=function(e){var t={postpone:!0,fillHoles:!1};return e=n.extend({},t,e),function(t,i){for(var s,r,a,o=new n.Svg.Path,l=0;l<t.length;l+=2){var c=t[l],u=t[l+1],d=i[l/2];void 0!==d.value?(void 0===a?o.move(c,u,!1,d):(e.postpone?o.line(c,r,!1,a):o.line(s,u,!1,d),o.line(c,u,!1,d)),s=c,r=u,a=d):e.fillHoles||(s=r=a=void 0)}return o}}}(window,document,e),function(e,t,n){"use strict";n.EventEmitter=function(){function e(e,t){i[e]=i[e]||[],i[e].push(t)}function t(e,t){i[e]&&(t?(i[e].splice(i[e].indexOf(t),1),0===i[e].length&&delete i[e]):delete i[e])}function n(e,t){i[e]&&i[e].forEach(function(e){e(t)}),i["*"]&&i["*"].forEach(function(n){n(e,t)})}var i=[];return{addEventHandler:e,removeEventHandler:t,emit:n}}}(window,document,e),function(e,t,n){"use strict";function i(e){var t=[];if(e.length)for(var n=0;n<e.length;n++)t.push(e[n]);return t}function s(e,t){var i=t||this.prototype||n.Class,s=Object.create(i);n.Class.cloneDefinitions(s,e);var r=function(){var e,t=s.constructor||function(){};return e=this===n?Object.create(s):this,t.apply(e,Array.prototype.slice.call(arguments,0)),e};return r.prototype=s,r.super=i,r.extend=this.extend,r}function r(){var e=i(arguments),t=e[0];return e.splice(1,e.length-1).forEach(function(e){Object.getOwnPropertyNames(e).forEach(function(n){delete t[n],Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}),t}n.Class={extend:s,cloneDefinitions:r}}(window,document,e),function(e,t,n){"use strict";function i(e,t,i){return e&&(this.data=e||{},this.data.labels=this.data.labels||[],this.data.series=this.data.series||[],this.eventEmitter.emit("data",{type:"update",data:this.data})),t&&(this.options=n.extend({},i?this.options:this.defaultOptions,t),this.initializeTimeoutId||(this.optionsProvider.removeMediaQueryListeners(),this.optionsProvider=n.optionsProvider(this.options,this.responsiveOptions,this.eventEmitter))),this.initializeTimeoutId||this.createChart(this.optionsProvider.getCurrentOptions()),this}function s(){return this.initializeTimeoutId?e.clearTimeout(this.initializeTimeoutId):(e.removeEventListener("resize",this.resizeListener),this.optionsProvider.removeMediaQueryListeners()),this}function r(e,t){return this.eventEmitter.addEventHandler(e,t),this}function a(e,t){return this.eventEmitter.removeEventHandler(e,t),this}function o(){e.addEventListener("resize",this.resizeListener),this.optionsProvider=n.optionsProvider(this.options,this.responsiveOptions,this.eventEmitter),this.eventEmitter.addEventHandler("optionsChanged",function(){this.update()}.bind(this)),this.options.plugins&&this.options.plugins.forEach(function(e){e instanceof Array?e[0](this,e[1]):e(this)}.bind(this)),this.eventEmitter.emit("data",{type:"initial",data:this.data}),this.createChart(this.optionsProvider.getCurrentOptions()),this.initializeTimeoutId=void 0}function l(e,t,i,s,r){this.container=n.querySelector(e),this.data=t||{},this.data.labels=this.data.labels||[],this.data.series=this.data.series||[],this.defaultOptions=i,this.options=s,this.responsiveOptions=r,this.eventEmitter=n.EventEmitter(),this.supportsForeignObject=n.Svg.isSupported("Extensibility"),this.supportsAnimations=n.Svg.isSupported("AnimationEventsAttribute"),this.resizeListener=function(){this.update()}.bind(this),this.container&&(this.container.__chartist__&&this.container.__chartist__.detach(),this.container.__chartist__=this),this.initializeTimeoutId=setTimeout(o.bind(this),0)}n.Base=n.Class.extend({constructor:l,optionsProvider:void 0,container:void 0,svg:void 0,eventEmitter:void 0,createChart:function(){throw new Error("Base chart type can't be instantiated!")},update:i,detach:s,on:r,off:a,version:n.version,supportsForeignObject:!1})}(window,document,e),function(e,t,n){"use strict";function i(e,i,s,r,a){e instanceof Element?this._node=e:(this._node=t.createElementNS(n.namespaces.svg,e),"svg"===e&&this.attr({"xmlns:ct":n.namespaces.ct})),i&&this.attr(i),s&&this.addClass(s),r&&(a&&r._node.firstChild?r._node.insertBefore(this._node,r._node.firstChild):r._node.appendChild(this._node))}function s(e,t){return"string"==typeof e?t?this._node.getAttributeNS(t,e):this._node.getAttribute(e):(Object.keys(e).forEach(function(t){if(void 0!==e[t])if(-1!==t.indexOf(":")){var i=t.split(":");this._node.setAttributeNS(n.namespaces[i[0]],t,e[t])}else this._node.setAttribute(t,e[t])}.bind(this)),this)}function r(e,t,i,s){return new n.Svg(e,t,i,this,s)}function a(){return this._node.parentNode instanceof SVGElement?new n.Svg(this._node.parentNode):null}function o(){for(var e=this._node;"svg"!==e.nodeName;)e=e.parentNode;return new n.Svg(e)}function l(e){var t=this._node.querySelector(e);return t?new n.Svg(t):null}function c(e){var t=this._node.querySelectorAll(e);return t.length?new n.Svg.List(t):null}function u(){return this._node}function d(e,i,s,r){if("string"==typeof e){var a=t.createElement("div");a.innerHTML=e,e=a.firstChild}e.setAttribute("xmlns",n.namespaces.xmlns);var o=this.elem("foreignObject",i,s,r);return o._node.appendChild(e),o}function h(e){return this._node.appendChild(t.createTextNode(e)),this}function p(){for(;this._node.firstChild;)this._node.removeChild(this._node.firstChild);return this}function f(){return this._node.parentNode.removeChild(this._node),this.parent()}function m(e){return this._node.parentNode.replaceChild(e._node,this._node),e}function g(e,t){return t&&this._node.firstChild?this._node.insertBefore(e._node,this._node.firstChild):this._node.appendChild(e._node),this}function v(){return this._node.getAttribute("class")?this._node.getAttribute("class").trim().split(/\s+/):[]}function x(e){return this._node.setAttribute("class",this.classes(this._node).concat(e.trim().split(/\s+/)).filter(function(e,t,n){return n.indexOf(e)===t}).join(" ")),this}function y(e){var t=e.trim().split(/\s+/);return this._node.setAttribute("class",this.classes(this._node).filter(function(e){return-1===t.indexOf(e)}).join(" ")),this}function w(){return this._node.setAttribute("class",""),this}function b(){return this._node.getBoundingClientRect().height}function S(){return this._node.getBoundingClientRect().width}function E(e,t,i){return void 0===t&&(t=!0),Object.keys(e).forEach(function(s){function r(e,t){var r,a,o,l={};e.easing&&(o=e.easing instanceof Array?e.easing:n.Svg.Easing[e.easing],delete e.easing),e.begin=n.ensureUnit(e.begin,"ms"),e.dur=n.ensureUnit(e.dur,"ms"),o&&(e.calcMode="spline",e.keySplines=o.join(" "),e.keyTimes="0;1"),t&&(e.fill="freeze",l[s]=e.from,this.attr(l),a=n.quantity(e.begin||0).value,e.begin="indefinite"),r=this.elem("animate",n.extend({attributeName:s},e)),t&&setTimeout(function(){try{r._node.beginElement()}catch(t){l[s]=e.to,this.attr(l),r.remove()}}.bind(this),a),i&&r._node.addEventListener("beginEvent",function(){i.emit("animationBegin",{element:this,animate:r._node,params:e})}.bind(this)),r._node.addEventListener("endEvent",function(){i&&i.emit("animationEnd",{element:this,animate:r._node,params:e}),t&&(l[s]=e.to,this.attr(l),r.remove())}.bind(this))}e[s]instanceof Array?e[s].forEach(function(e){r.bind(this)(e,!1)}.bind(this)):r.bind(this)(e[s],t)}.bind(this)),this}function C(e){var t=this;this.svgElements=[];for(var i=0;i<e.length;i++)this.svgElements.push(new n.Svg(e[i]));Object.keys(n.Svg.prototype).filter(function(e){return-1===["constructor","parent","querySelector","querySelectorAll","replace","append","classes","height","width"].indexOf(e)}).forEach(function(e){t[e]=function(){var i=Array.prototype.slice.call(arguments,0);return t.svgElements.forEach(function(t){n.Svg.prototype[e].apply(t,i)}),t}})}n.Svg=n.Class.extend({constructor:i,attr:s,elem:r,parent:a,root:o,querySelector:l,querySelectorAll:c,getNode:u,foreignObject:d,text:h,empty:p,remove:f,replace:m,append:g,classes:v,addClass:x,removeClass:y,removeAllClasses:w,height:b,width:S,animate:E}),n.Svg.isSupported=function(e){return t.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#"+e,"1.1")};var A={easeInSine:[.47,0,.745,.715],easeOutSine:[.39,.575,.565,1],easeInOutSine:[.445,.05,.55,.95],easeInQuad:[.55,.085,.68,.53],easeOutQuad:[.25,.46,.45,.94],easeInOutQuad:[.455,.03,.515,.955],easeInCubic:[.55,.055,.675,.19],easeOutCubic:[.215,.61,.355,1],easeInOutCubic:[.645,.045,.355,1],easeInQuart:[.895,.03,.685,.22],easeOutQuart:[.165,.84,.44,1],easeInOutQuart:[.77,0,.175,1],easeInQuint:[.755,.05,.855,.06],easeOutQuint:[.23,1,.32,1],easeInOutQuint:[.86,0,.07,1],easeInExpo:[.95,.05,.795,.035],easeOutExpo:[.19,1,.22,1],easeInOutExpo:[1,0,0,1],easeInCirc:[.6,.04,.98,.335],easeOutCirc:[.075,.82,.165,1],easeInOutCirc:[.785,.135,.15,.86],easeInBack:[.6,-.28,.735,.045],easeOutBack:[.175,.885,.32,1.275],easeInOutBack:[.68,-.55,.265,1.55]};n.Svg.Easing=A,n.Svg.List=n.Class.extend({constructor:C})}(window,document,e),function(e,t,n){"use strict";function i(e,t,i,s,r,a){var o=n.extend({command:r?e.toLowerCase():e.toUpperCase()},t,a?{data:a}:{});i.splice(s,0,o)}function s(e,t){e.forEach(function(n,i){w[n.command.toLowerCase()].forEach(function(s,r){t(n,s,i,r,e)})})}function r(e,t){this.pathElements=[],this.pos=0,this.close=e,this.options=n.extend({},b,t)}function a(e){return void 0!==e?(this.pos=Math.max(0,Math.min(this.pathElements.length,e)),this):this.pos}function o(e){return this.pathElements.splice(this.pos,e),this}function l(e,t,n,s){return i("M",{x:+e,y:+t},this.pathElements,this.pos++,n,s),this}function c(e,t,n,s){return i("L",{x:+e,y:+t},this.pathElements,this.pos++,n,s),this}function u(e,t,n,s,r,a,o,l){return i("C",{x1:+e,y1:+t,x2:+n,y2:+s,x:+r,y:+a},this.pathElements,this.pos++,o,l),this}function d(e,t,n,s,r,a,o,l,c){return i("A",{rx:+e,ry:+t,xAr:+n,lAf:+s,sf:+r,x:+a,y:+o},this.pathElements,this.pos++,l,c),this}function h(e){var t=e.replace(/([A-Za-z])([0-9])/g,"$1 $2").replace(/([0-9])([A-Za-z])/g,"$1 $2").split(/[\s,]+/).reduce(function(e,t){return t.match(/[A-Za-z]/)&&e.push([]),e[e.length-1].push(t),e},[]);"Z"===t[t.length-1][0].toUpperCase()&&t.pop();var i=t.map(function(e){var t=e.shift(),i=w[t.toLowerCase()];return n.extend({command:t},i.reduce(function(t,n,i){return t[n]=+e[i],t},{}))}),s=[this.pos,0];return Array.prototype.push.apply(s,i),Array.prototype.splice.apply(this.pathElements,s),this.pos+=i.length,this}function p(){var e=Math.pow(10,this.options.accuracy);return this.pathElements.reduce(function(t,n){var i=w[n.command.toLowerCase()].map(function(t){return this.options.accuracy?Math.round(n[t]*e)/e:n[t]}.bind(this));return t+n.command+i.join(",")}.bind(this),"")+(this.close?"Z":"")}function f(e,t){return s(this.pathElements,function(n,i){n[i]*="x"===i[0]?e:t}),this}function m(e,t){return s(this.pathElements,function(n,i){n[i]+="x"===i[0]?e:t}),this}function g(e){return s(this.pathElements,function(t,n,i,s,r){var a=e(t,n,i,s,r);(a||0===a)&&(t[n]=a)}),this}function v(e){var t=new n.Svg.Path(e||this.close);return t.pos=this.pos,t.pathElements=this.pathElements.slice().map(function(e){return n.extend({},e)}),t.options=n.extend({},this.options),t}function x(e){var t=[new n.Svg.Path];return this.pathElements.forEach(function(i){i.command===e.toUpperCase()&&0!==t[t.length-1].pathElements.length&&t.push(new n.Svg.Path),t[t.length-1].pathElements.push(i)}),t}function y(e,t,i){for(var s=new n.Svg.Path(t,i),r=0;r<e.length;r++)for(var a=e[r],o=0;o<a.pathElements.length;o++)s.pathElements.push(a.pathElements[o]);return s}var w={m:["x","y"],l:["x","y"],c:["x1","y1","x2","y2","x","y"],a:["rx","ry","xAr","lAf","sf","x","y"]},b={accuracy:3};n.Svg.Path=n.Class.extend({constructor:r,position:a,remove:o,move:l,line:c,curve:u,arc:d,scale:f,translate:m,transform:g,parse:h,stringify:p,clone:v,splitByCommand:x}),n.Svg.Path.elementDescriptions=w,n.Svg.Path.join=y}(window,document,e),function(e,t,n){"use strict";function i(e,t,n,i){this.units=e,this.counterUnits=e===r.x?r.y:r.x,this.chartRect=t,this.axisLength=t[e.rectEnd]-t[e.rectStart],this.gridOffset=t[e.rectOffset],this.ticks=n,this.options=i}function s(e,t,i,s,r){var a=s["axis"+this.units.pos.toUpperCase()],o=this.ticks.map(this.projectValue.bind(this)),l=this.ticks.map(a.labelInterpolationFnc);o.forEach(function(c,u){var d,h={x:0,y:0};d=o[u+1]?o[u+1]-c:Math.max(this.axisLength-c,30),n.isFalseyButZero(l[u])&&""!==l[u]||("x"===this.units.pos?(c=this.chartRect.x1+c,h.x=s.axisX.labelOffset.x,"start"===s.axisX.position?h.y=this.chartRect.padding.top+s.axisX.labelOffset.y+(i?5:20):h.y=this.chartRect.y1+s.axisX.labelOffset.y+(i?5:20)):(c=this.chartRect.y1-c,h.y=s.axisY.labelOffset.y-(i?d:0),"start"===s.axisY.position?h.x=i?this.chartRect.padding.left+s.axisY.labelOffset.x:this.chartRect.x1-10:h.x=this.chartRect.x2+s.axisY.labelOffset.x+10),a.showGrid&&n.createGrid(c,u,this,this.gridOffset,this.chartRect[this.counterUnits.len](),e,[s.classNames.grid,s.classNames[this.units.dir]],r),a.showLabel&&n.createLabel(c,d,u,l,this,a.offset,h,t,[s.classNames.label,s.classNames[this.units.dir],"start"===a.position?s.classNames[a.position]:s.classNames.end],i,r))}.bind(this))}var r={x:{pos:"x",len:"width",dir:"horizontal",rectStart:"x1",rectEnd:"x2",rectOffset:"y2"},y:{pos:"y",len:"height",dir:"vertical",rectStart:"y2",rectEnd:"y1",rectOffset:"x1"}};n.Axis=n.Class.extend({constructor:i,createGridAndLabels:s,projectValue:function(e,t,n){throw new Error("Base axis can't be instantiated!")}}),n.Axis.units=r}(window,document,e),function(e,t,n){"use strict";function i(e,t,i,s){var r=s.highLow||n.getHighLow(t,s,e.pos);this.bounds=n.getBounds(i[e.rectEnd]-i[e.rectStart],r,s.scaleMinSpace||20,s.onlyInteger),this.range={min:this.bounds.min,max:this.bounds.max},n.AutoScaleAxis.super.constructor.call(this,e,i,this.bounds.values,s)}function s(e){return this.axisLength*(+n.getMultiValue(e,this.units.pos)-this.bounds.min)/this.bounds.range}n.AutoScaleAxis=n.Axis.extend({constructor:i,projectValue:s})}(window,document,e),function(e,t,n){"use strict";function i(e,t,i,s){var r=s.highLow||n.getHighLow(t,s,e.pos);this.divisor=s.divisor||1,this.ticks=s.ticks||n.times(this.divisor).map(function(e,t){return r.low+(r.high-r.low)/this.divisor*t}.bind(this)),this.ticks.sort(function(e,t){return e-t}),this.range={min:r.low,max:r.high},n.FixedScaleAxis.super.constructor.call(this,e,i,this.ticks,s),this.stepLength=this.axisLength/this.divisor}function s(e){return this.axisLength*(+n.getMultiValue(e,this.units.pos)-this.range.min)/(this.range.max-this.range.min)}n.FixedScaleAxis=n.Axis.extend({constructor:i,projectValue:s})}(window,document,e),function(e,t,n){"use strict";function i(e,t,i,s){n.StepAxis.super.constructor.call(this,e,i,s.ticks,s);var r=Math.max(1,s.ticks.length-(s.stretch?1:0));this.stepLength=this.axisLength/r}function s(e,t){return this.stepLength*t}n.StepAxis=n.Axis.extend({constructor:i,projectValue:s})}(window,document,e),function(e,t,n){"use strict";function i(e){var t=n.normalizeData(this.data,e.reverseData,!0);this.svg=n.createSvg(this.container,e.width,e.height,e.classNames.chart);var i,s,a=this.svg.elem("g").addClass(e.classNames.gridGroup),o=this.svg.elem("g"),l=this.svg.elem("g").addClass(e.classNames.labelGroup),c=n.createChartRect(this.svg,e,r.padding);i=void 0===e.axisX.type?new n.StepAxis(n.Axis.units.x,t.normalized.series,c,n.extend({},e.axisX,{ticks:t.normalized.labels,stretch:e.fullWidth})):e.axisX.type.call(n,n.Axis.units.x,t.normalized.series,c,e.axisX),s=void 0===e.axisY.type?new n.AutoScaleAxis(n.Axis.units.y,t.normalized.series,c,n.extend({},e.axisY,{high:n.isNumeric(e.high)?e.high:e.axisY.high,low:n.isNumeric(e.low)?e.low:e.axisY.low})):e.axisY.type.call(n,n.Axis.units.y,t.normalized.series,c,e.axisY),i.createGridAndLabels(a,l,this.supportsForeignObject,e,this.eventEmitter),s.createGridAndLabels(a,l,this.supportsForeignObject,e,this.eventEmitter),e.showGridBackground&&n.createGridBackground(a,c,e.classNames.gridBackground,this.eventEmitter),t.raw.series.forEach(function(r,a){var l=o.elem("g");l.attr({"ct:series-name":r.name,"ct:meta":n.serialize(r.meta)}),l.addClass([e.classNames.series,r.className||e.classNames.series+"-"+n.alphaNumerate(a)].join(" "));var u=[],d=[];t.normalized.series[a].forEach(function(e,o){var l={x:c.x1+i.projectValue(e,o,t.normalized.series[a]),y:c.y1-s.projectValue(e,o,t.normalized.series[a])};u.push(l.x,l.y),d.push({value:e,valueIndex:o,meta:n.getMetaData(r,o)})}.bind(this));var h={lineSmooth:n.getSeriesOption(r,e,"lineSmooth"),showPoint:n.getSeriesOption(r,e,"showPoint"),showLine:n.getSeriesOption(r,e,"showLine"),showArea:n.getSeriesOption(r,e,"showArea"),areaBase:n.getSeriesOption(r,e,"areaBase")},p="function"==typeof h.lineSmooth?h.lineSmooth:h.lineSmooth?n.Interpolation.monotoneCubic():n.Interpolation.none(),f=p(u,d);if(h.showPoint&&f.pathElements.forEach(function(t){var o=l.elem("line",{x1:t.x,y1:t.y,x2:t.x+.01,y2:t.y},e.classNames.point).attr({"ct:value":[t.data.value.x,t.data.value.y].filter(n.isNumeric).join(","),"ct:meta":n.serialize(t.data.meta)});this.eventEmitter.emit("draw",{type:"point",value:t.data.value,index:t.data.valueIndex,meta:t.data.meta,series:r,seriesIndex:a,axisX:i,axisY:s,group:l,element:o,x:t.x,y:t.y})}.bind(this)),h.showLine){var m=l.elem("path",{d:f.stringify()},e.classNames.line,!0);this.eventEmitter.emit("draw",{type:"line",values:t.normalized.series[a],path:f.clone(),chartRect:c,index:a,series:r,seriesIndex:a,seriesMeta:r.meta,axisX:i,axisY:s,group:l,element:m})}if(h.showArea&&s.range){var g=Math.max(Math.min(h.areaBase,s.range.max),s.range.min),v=c.y1-s.projectValue(g);f.splitByCommand("M").filter(function(e){return e.pathElements.length>1}).map(function(e){var t=e.pathElements[0],n=e.pathElements[e.pathElements.length-1];return e.clone(!0).position(0).remove(1).move(t.x,v).line(t.x,t.y).position(e.pathElements.length+1).line(n.x,v)}).forEach(function(n){var o=l.elem("path",{d:n.stringify()},e.classNames.area,!0);this.eventEmitter.emit("draw",{type:"area",values:t.normalized.series[a],path:n.clone(),series:r,seriesIndex:a,axisX:i,axisY:s,chartRect:c,index:a,group:l,element:o})}.bind(this))}}.bind(this)),this.eventEmitter.emit("created",{bounds:s.bounds,chartRect:c,axisX:i,axisY:s,svg:this.svg,options:e})}function s(e,t,i,s){n.Line.super.constructor.call(this,e,t,r,n.extend({},r,i),s)}var r={axisX:{offset:30,position:"end",labelOffset:{x:0,y:0},showLabel:!0,showGrid:!0,labelInterpolationFnc:n.noop,type:void 0},axisY:{offset:40,position:"start",labelOffset:{x:0,y:0},showLabel:!0,showGrid:!0,labelInterpolationFnc:n.noop,type:void 0,scaleMinSpace:20,onlyInteger:!1},width:void 0,height:void 0,showLine:!0,showPoint:!0,showArea:!1,areaBase:0,lineSmooth:!0,showGridBackground:!1,low:void 0,high:void 0,chartPadding:{top:15,right:15,bottom:5,left:10},fullWidth:!1,reverseData:!1,classNames:{chart:"ct-chart-line",label:"ct-label",labelGroup:"ct-labels",series:"ct-series",line:"ct-line",point:"ct-point",area:"ct-area",grid:"ct-grid",gridGroup:"ct-grids",gridBackground:"ct-grid-background",vertical:"ct-vertical",horizontal:"ct-horizontal",start:"ct-start",end:"ct-end"}};n.Line=n.Base.extend({constructor:s,createChart:i})}(window,document,e),function(e,t,n){"use strict";function i(e){var t,i;e.distributeSeries?(t=n.normalizeData(this.data,e.reverseData,e.horizontalBars?"x":"y"),t.normalized.series=t.normalized.series.map(function(e){return[e]})):t=n.normalizeData(this.data,e.reverseData,e.horizontalBars?"x":"y"),this.svg=n.createSvg(this.container,e.width,e.height,e.classNames.chart+(e.horizontalBars?" "+e.classNames.horizontalBars:""));var s=this.svg.elem("g").addClass(e.classNames.gridGroup),a=this.svg.elem("g"),o=this.svg.elem("g").addClass(e.classNames.labelGroup);if(e.stackBars&&0!==t.normalized.series.length){var l=n.serialMap(t.normalized.series,function(){return Array.prototype.slice.call(arguments).map(function(e){return e}).reduce(function(e,t){return{x:e.x+(t&&t.x)||0,y:e.y+(t&&t.y)||0}},{x:0,y:0})});i=n.getHighLow([l],e,e.horizontalBars?"x":"y")}else i=n.getHighLow(t.normalized.series,e,e.horizontalBars?"x":"y");i.high=+e.high||(0===e.high?0:i.high),i.low=+e.low||(0===e.low?0:i.low);var c,u,d,h,p,f=n.createChartRect(this.svg,e,r.padding);u=e.distributeSeries&&e.stackBars?t.normalized.labels.slice(0,1):t.normalized.labels,e.horizontalBars?(c=h=void 0===e.axisX.type?new n.AutoScaleAxis(n.Axis.units.x,t.normalized.series,f,n.extend({},e.axisX,{highLow:i,referenceValue:0})):e.axisX.type.call(n,n.Axis.units.x,t.normalized.series,f,n.extend({},e.axisX,{highLow:i,referenceValue:0})),d=p=void 0===e.axisY.type?new n.StepAxis(n.Axis.units.y,t.normalized.series,f,{ticks:u}):e.axisY.type.call(n,n.Axis.units.y,t.normalized.series,f,e.axisY)):(d=h=void 0===e.axisX.type?new n.StepAxis(n.Axis.units.x,t.normalized.series,f,{ticks:u}):e.axisX.type.call(n,n.Axis.units.x,t.normalized.series,f,e.axisX),c=p=void 0===e.axisY.type?new n.AutoScaleAxis(n.Axis.units.y,t.normalized.series,f,n.extend({},e.axisY,{highLow:i,referenceValue:0})):e.axisY.type.call(n,n.Axis.units.y,t.normalized.series,f,n.extend({},e.axisY,{highLow:i,referenceValue:0})));var m=e.horizontalBars?f.x1+c.projectValue(0):f.y1-c.projectValue(0),g=[];d.createGridAndLabels(s,o,this.supportsForeignObject,e,this.eventEmitter),c.createGridAndLabels(s,o,this.supportsForeignObject,e,this.eventEmitter),e.showGridBackground&&n.createGridBackground(s,f,e.classNames.gridBackground,this.eventEmitter),t.raw.series.forEach(function(i,s){var r,o,l=s-(t.raw.series.length-1)/2;r=e.distributeSeries&&!e.stackBars?d.axisLength/t.normalized.series.length/2:e.distributeSeries&&e.stackBars?d.axisLength/2:d.axisLength/t.normalized.series[s].length/2,o=a.elem("g"),o.attr({"ct:series-name":i.name,"ct:meta":n.serialize(i.meta)}),o.addClass([e.classNames.series,i.className||e.classNames.series+"-"+n.alphaNumerate(s)].join(" ")),t.normalized.series[s].forEach(function(a,u){var v,x,y,w;if(w=e.distributeSeries&&!e.stackBars?s:e.distributeSeries&&e.stackBars?0:u,v=e.horizontalBars?{x:f.x1+c.projectValue(a&&a.x?a.x:0,u,t.normalized.series[s]),y:f.y1-d.projectValue(a&&a.y?a.y:0,w,t.normalized.series[s])}:{x:f.x1+d.projectValue(a&&a.x?a.x:0,w,t.normalized.series[s]),y:f.y1-c.projectValue(a&&a.y?a.y:0,u,t.normalized.series[s])},d instanceof n.StepAxis&&(d.options.stretch||(v[d.units.pos]+=r*(e.horizontalBars?-1:1)),v[d.units.pos]+=e.stackBars||e.distributeSeries?0:l*e.seriesBarDistance*(e.horizontalBars?-1:1)),y=g[u]||m,g[u]=y-(m-v[d.counterUnits.pos]),void 0!==a){var b={};b[d.units.pos+"1"]=v[d.units.pos],b[d.units.pos+"2"]=v[d.units.pos],!e.stackBars||"accumulate"!==e.stackMode&&e.stackMode?(b[d.counterUnits.pos+"1"]=m,b[d.counterUnits.pos+"2"]=v[d.counterUnits.pos]):(b[d.counterUnits.pos+"1"]=y,b[d.counterUnits.pos+"2"]=g[u]),b.x1=Math.min(Math.max(b.x1,f.x1),f.x2),b.x2=Math.min(Math.max(b.x2,f.x1),f.x2),b.y1=Math.min(Math.max(b.y1,f.y2),f.y1),b.y2=Math.min(Math.max(b.y2,f.y2),f.y1);var S=n.getMetaData(i,u);x=o.elem("line",b,e.classNames.bar).attr({"ct:value":[a.x,a.y].filter(n.isNumeric).join(","),"ct:meta":n.serialize(S)}),this.eventEmitter.emit("draw",n.extend({type:"bar",value:a,index:u,meta:S,series:i,seriesIndex:s,axisX:h,axisY:p,chartRect:f,group:o,element:x},b))}}.bind(this))}.bind(this)),this.eventEmitter.emit("created",{bounds:c.bounds,chartRect:f,axisX:h,axisY:p,svg:this.svg,options:e})}function s(e,t,i,s){n.Bar.super.constructor.call(this,e,t,r,n.extend({},r,i),s)}var r={axisX:{offset:30,position:"end",labelOffset:{x:0,y:0},showLabel:!0,showGrid:!0,labelInterpolationFnc:n.noop,scaleMinSpace:30,onlyInteger:!1},axisY:{offset:40,position:"start",labelOffset:{x:0,y:0},showLabel:!0,showGrid:!0,labelInterpolationFnc:n.noop,scaleMinSpace:20,onlyInteger:!1},width:void 0,height:void 0,high:void 0,low:void 0,referenceValue:0,chartPadding:{top:15,right:15,bottom:5,left:10},seriesBarDistance:15,stackBars:!1,stackMode:"accumulate",horizontalBars:!1,distributeSeries:!1,reverseData:!1,showGridBackground:!1,classNames:{chart:"ct-chart-bar",horizontalBars:"ct-horizontal-bars",label:"ct-label",labelGroup:"ct-labels",series:"ct-series",bar:"ct-bar",grid:"ct-grid",gridGroup:"ct-grids",gridBackground:"ct-grid-background",vertical:"ct-vertical",horizontal:"ct-horizontal",start:"ct-start",end:"ct-end"}};n.Bar=n.Base.extend({constructor:s,createChart:i})}(window,document,e),function(e,t,n){"use strict";function i(e,t,n){var i=t.x>e.x;return i&&"explode"===n||!i&&"implode"===n?"start":i&&"implode"===n||!i&&"explode"===n?"end":"middle"}function s(e){var t,s,r,o,l,c=n.normalizeData(this.data),u=[],d=e.startAngle;this.svg=n.createSvg(this.container,e.width,e.height,e.donut?e.classNames.chartDonut:e.classNames.chartPie),s=n.createChartRect(this.svg,e,a.padding),r=Math.min(s.width()/2,s.height()/2),l=e.total||c.normalized.series.reduce(function(e,t){return e+t},0);var h=n.quantity(e.donutWidth);"%"===h.unit&&(h.value*=r/100),r-=e.donut&&!e.donutSolid?h.value/2:0,o="outside"===e.labelPosition||e.donut&&!e.donutSolid?r:"center"===e.labelPosition?0:e.donutSolid?r-h.value/2:r/2,o+=e.labelOffset;var p={x:s.x1+s.width()/2,y:s.y2+s.height()/2},f=1===c.raw.series.filter(function(e){return e.hasOwnProperty("value")?0!==e.value:0!==e}).length;c.raw.series.forEach(function(e,t){u[t]=this.svg.elem("g",null,null)}.bind(this)),e.showLabel&&(t=this.svg.elem("g",null,null)),c.raw.series.forEach(function(s,a){if(0!==c.normalized.series[a]||!e.ignoreEmptyValues){u[a].attr({"ct:series-name":s.name}),u[a].addClass([e.classNames.series,s.className||e.classNames.series+"-"+n.alphaNumerate(a)].join(" "));var m=l>0?d+c.normalized.series[a]/l*360:0,g=Math.max(0,d-(0===a||f?0:.2));m-g>=359.99&&(m=g+359.99);var v,x,y,w=n.polarToCartesian(p.x,p.y,r,g),b=n.polarToCartesian(p.x,p.y,r,m),S=new n.Svg.Path(!e.donut||e.donutSolid).move(b.x,b.y).arc(r,r,0,m-d>180,0,w.x,w.y);e.donut?e.donutSolid&&(y=r-h.value,v=n.polarToCartesian(p.x,p.y,y,d-(0===a||f?0:.2)),x=n.polarToCartesian(p.x,p.y,y,m),S.line(v.x,v.y),S.arc(y,y,0,m-d>180,1,x.x,x.y)):S.line(p.x,p.y);var E=e.classNames.slicePie;e.donut&&(E=e.classNames.sliceDonut,e.donutSolid&&(E=e.classNames.sliceDonutSolid));var C=u[a].elem("path",{d:S.stringify()},E);if(C.attr({"ct:value":c.normalized.series[a],"ct:meta":n.serialize(s.meta)}),e.donut&&!e.donutSolid&&(C._node.style.strokeWidth=h.value+"px"),this.eventEmitter.emit("draw",{type:"slice",value:c.normalized.series[a],totalDataSum:l,index:a,meta:s.meta,series:s,group:u[a],element:C,path:S.clone(),center:p,radius:r,startAngle:d,endAngle:m}),e.showLabel){var A;A=1===c.raw.series.length?{x:p.x,y:p.y}:n.polarToCartesian(p.x,p.y,o,d+(m-d)/2);var z;z=c.normalized.labels&&!n.isFalseyButZero(c.normalized.labels[a])?c.normalized.labels[a]:c.normalized.series[a];var M=e.labelInterpolationFnc(z,a);if(M||0===M){var O=t.elem("text",{dx:A.x,dy:A.y,"text-anchor":i(p,A,e.labelDirection)},e.classNames.label).text(""+M);this.eventEmitter.emit("draw",{type:"label",index:a,group:t,element:O,text:""+M,x:A.x,y:A.y})}}d=m}}.bind(this)),this.eventEmitter.emit("created",{chartRect:s,svg:this.svg,options:e})}function r(e,t,i,s){n.Pie.super.constructor.call(this,e,t,a,n.extend({},a,i),s)}var a={width:void 0,height:void 0,chartPadding:5,classNames:{chartPie:"ct-chart-pie",chartDonut:"ct-chart-donut",series:"ct-series",slicePie:"ct-slice-pie",sliceDonut:"ct-slice-donut",sliceDonutSolid:"ct-slice-donut-solid",label:"ct-label"},startAngle:0,total:void 0,donut:!1,donutSolid:!1,donutWidth:60,showLabel:!0,labelOffset:0,labelPosition:"inside",labelInterpolationFnc:n.noop,labelDirection:"neutral",reverseData:!1,ignoreEmptyValues:!1};n.Pie=n.Base.extend({constructor:r,createChart:s,determineAnchorPosition:i})}(window,document,e),e})},293:function(e,t){var n="views/dashboard.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<h1>Active Industrial Sensors</h1>\n\n<p ng-show="noSensor()">We aren\'t tracking any Industrial Sensors right now. Click the Add Industrial Sensor button to get started.</p>\n\n<div ng-repeat="sensor in sensors" class="jumbotron sensor sensor{{ sensor.info.id }} chalk-background">\n  <h3>\n    {{ sensor.info.name }}\n  </h3>\n\n  <div ng-init="initCharts()" class="row">\n    <div class="col-lg-4">\n        <h4 class="col-lg-offset-1">Storage Temperature (F)</h4> \n        <div id="chart-temperature" class="ct-chart ct-perfect-square"></div>\n    </div>\n    <div class="col-lg-4">\n        <h4 class="col-lg-offset-1">Inventory (Oz)</h4>\n        <div id="chart-weight" class="ct-chart ct-perfect-square"></div>\n    </div>\n    <div class="col-lg-4">\n        <h4 class="col-lg-offset-1">Storage Humidity (%)</h4>\n        <div id="chart-humidity" class="ct-chart ct-perfect-square"></div>\n    </div>\n  </div>\n\n</div>\n')}]),e.exports=n},294:function(e,t){var n="views/sensor_list.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class="row">\n  <div class="col-lg-12">\n    <div class="page-header">\n      <h1 id="tables">Configuration</h1>\n      <p ng-show="noSensor()">We aren\'t tracking any Industrial Sensors right now. Click the New Industrial Sensor button to get started.</p>\n    </div>\n\n    <div class="bs-component">\n      <table ng-show="!noSensor()" class="table table-striped table-hover">\n        <thead>\n          <tr>\n            <th><strong>Id</strong></th>\n            <th><strong>Name</strong></th>\n            <th><strong>SIM Sid</strong></th>\n            <th><strong>Token</strong></th>\n            <th><strong>Created</strong></th>\n            <th><strong>Actions</strong></th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr ng-repeat="sensor in sensors" class="chalk-background" ng-class="{\'text-success\': editedSensorInfo.id === sensor.info.id}">\n            <td>{{ sensor.info.id }}</td>\n            <td>{{ sensor.info.name }}</td>\n            <td>{{ sensor.info.twilio_sim_sid }}</td>\n            <td>\n                <small ng-if="editedSensorInfo.id === sensor.info.id" class="text-warning">{{ editedSensorInfo.token }}</small>\n                <button ng-click="regenTokenForSensor(sensor.info.id)" ng-if="editedSensorInfo.id !== sensor.info.id" class="btn btn-xs btn-success">Regenerate</button>\n            </td>\n            <td>{{ sensor.info.created_at | moment }}</td>\n            <td>\n                <button ng-click="editSensor(sensor.info.id)" class="btn btn-xs btn-success">Edit</button>\n                &nbsp;\n                <button ng-click="deleteSensor(sensor.info.id)" class="btn btn-xs btn-danger">Delete</button>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    <div id="source-button" class="btn btn-xs btn-primary" style="display: none;">&lt; &gt;</div></div>\x3c!-- /example --\x3e\n  </div>\n</div>\n\n<button class="btn btn-primary add-sensor-show">New Industrial Sensor</button>\n\n<div class="row add-sensor chalk-background">\n  <div class="col-lg-12">\n    <form class="form-horizontal" ng-submit="addSensor()">\n      <fieldset>\n        <h2>Add Industrial Sensor</h2>\n\n        <div class="form-group">\n          <label for="id" class="col-lg-2">Id</label>\n          <div class="col-lg-12">\n            <input type="text" class="form-control" ng-model="newSensor.id" id="id" placeholder="">\n            <p>This can be any unique alphanumeric identifier.</p>\n          </div>\n        </div>\n\n        <div class="form-group">\n          <label for="name" class="col-lg-2">Name</label>\n          <div class="col-lg-12">\n            <input type="text" class="form-control" ng-model="newSensor.name" id="name" placeholder="">\n            <p>Give your Industrial Sensor a descriptive name for the dashboard.</p>\n          </div>\n        </div>\n\n        <div class="form-group">\n          <label for="twilio_sim_sid" class="col-lg-2">Twilio SIM Sid</label>\n          <div class="col-lg-12">\n            <input type="text" class="form-control" ng-model="newSensor.twilio_sim_sid" id="twilio_sim_sid" placeholder="">\n            <p>You can find your SIM Sid in Twilio\'s <a href="https://www.twilio.com/console/wireless/sims/">Console</a>.</p>\n          </div>\n        </div>\n\n        <div class="form-group">\n          <div class="col-lg-12">\n            <button type="submit" class="btn btn-primary">Submit</button>\n            <button type="reset" class="btn btn-default add-sensor-cancel">Cancel</button>\n          </div>\n        </div>\n\n        <p class="text-warning" id="add-sensor-failed"></p>\n      </fieldset>\n    </form>\n  </div>\n</div>\n\n<div class="row edit-sensor chalk-background">\n  <div class="col-lg-12">\n    <form class="form-horizontal" ng-submit="updateSensor()">\n      <fieldset>\n        <h2>Update Industrial Sensor</h2>\n\n        <div class="form-group">\n          <label for="id" class="col-lg-2">Id</label>\n          <div class="col-lg-12">\n            <input type="text" class="form-control" ng-model="editedSensorInfo.id" id="id" value="{{ editedSensorInfo.id }}" placeholder="" disabled>\n            <p>This can be any unique alphanumeric identifier.</p>\n          </div>\n        </div>\n\n        <div class="form-group">\n          <label for="name" class="col-lg-2">Name</label>\n          <div class="col-lg-12">\n            <input type="text" class="form-control" ng-model="editedSensorInfo.name" id="name" value="{{ editedSensorInfo.name }}" placeholder="">\n            <p>Give your Industrial Sensor a descriptive name for the dashboard.</p>\n          </div>\n        </div>\n\n        <div class="form-group">\n          <label for="twilio_sim_sid" class="col-lg-2">Twilio SIM Sid</label>\n          <div class="col-lg-12">\n            <input type="text" class="form-control" ng-model="editedSensorInfo.twilio_sim_sid" id="twilio_sim_sid" value="{{ editedSensorInfo.twilio_sim_sid }}" placeholder="">\n            <p>You can find your SIM Sid in Twilio\'s <a href="https://www.twilio.com/console/wireless/sims/">Console</a>.</p>\n          </div>\n        </div>\n\n        <div class="form-group">\n          <div class="col-lg-10">\n            <button type="submit" class="btn btn-primary">Submit</button>\n            <button type="reset" class="btn btn-default edit-sensor-cancel">Cancel</button>\n          </div>\n        </div>\n\n        <p class="text-warning" id="edit-sensor-failed"></p>\n      </fieldset>\n    </form>\n  </div>\n</div>\n')}]),e.exports=n},319:function(e,t){e.exports=Twilio.Sync}},[209]);
//# sourceMappingURL=index.js.map